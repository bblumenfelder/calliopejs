var Calliope;(()=>{var e={312:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});let n=r(277);class o{constructor(e){this.text=e,this.text_original=e,this.text_scanned=null,this.text_macronized=null,this.text_scanned_unescaped=null,this.scansion_aligned=null,this.scansion_strict=null}analyze(){const e=this.scan(this.text),t=this.macronize(e),r=this.getWorkingLine(e),n=this.transcribe(e),o=this.unescape(e),i=this.getScansion(n),a=this.getScansionStrict(i);return{scanned:o,macronized:t,scansion:i,original:this.text_original,working_line:r,scansion_strict:a}}transcribe(e){return e.replaceAll("&#772;","=").replaceAll("&#774;","*")}macronize(e){let t=this.unescape(e.replaceAll("&#774;",""));return this.text_macronized=t,t}unescape(e){const t=document.createElement("textarea");return t.innerHTML=e,this.text_scanned_unescaped=t.value,t.value}getWorkingLine(e){return e.replaceAll("&#772;","").replaceAll("&#774;","")}getScansion(e){const t=e.split("").map((e=>"="===e?"¯":"*"===e?"˘":" ")).join("")+"x";return t.split("").map(((e,r)=>{let n=t.split("")[r+1];return" "!==e||"¯"!==n&&"˘"!==n&&"x"!==n?e:null})).filter((e=>e)).join("")}getScansionStrict(e){return e.replaceAll(" ","")}scan(e){const t=n(e);return this.text_scanned=t,t}async normalizeText(e){const t=(e,t,r)=>new Promise((async(n,o)=>{n(r.replace(e,t))})),r={aē:"ae",oē:"oe",ă:"a",ĕ:"e",ĭ:"i",ŏ:"o",ŭ:"u"};for await(let n of Object.entries(r)){let o=n,i=r[o];e=await t(o,i,e)}}}},138:(e,t,r)=>{const n=r(312).Z;e.exports=n},277:e=>{e.exports=function(e){!function(){for(v in r={a:257,e:275,i:299,o:333,u:363,A:256,E:274,I:298,O:332,U:362,oe:338},t={a:259,e:277,i:301,o:335,u:365,A:258,E:276,I:300,O:334,U:364,oe:338})t[v]=n("&#"+t[v]+";");for(v in r)r[v]=n("&#"+r[v]+";")}();var t={},r={};function n(e){return $("<div/>").append(e).html()}function o(e){return"string"==typeof e}function i(e,t){return function(r){for(var n in ret=[],r)if(o(r[n])){for(prev=0,e.lastIndex=0;null!=(m=e.exec(r[n]));)ret.push(r[n].substr(prev,m.index-prev)),ret.push(t(m)),prev=m.index+m[1].length;ret.push(r[n].substr(prev))}else ret.push(r[n]);return ret}}var a=i(/(qu|[cpt]h)/gi,(function(e){return{type:"token",root:e[1].toLowerCase(),text:e[1],mora:1}})),l=i(/(ae|au|ei|oe|ui)/gi,(function(e){return{type:"token",root:e[1].toLowerCase(),text:e[1],mora:2,vowel:!0}})),s=i(/([bcdfgpt][lr])/gi,(function(e){return{type:"token",root:e[1].toLowerCase(),text:e[1],mora:1}})),u=i(/([xz])/gi,(function(){return{type:"token",root:m[1].toLowerCase(),text:m[1],mora:2}})),c=i(/([aeiouy])/gi,(function(e){return{type:"token",vowel:!0,root:e[1].toLowerCase(),text:e[1]}}));function p(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}return function(e){var t="";for(var r of($("label_caesurae").is(":checked"),e))o(r)?t+=r:r.vowel?2==r.mora?(r.text.length,t+=r.text+"&#772;"):0==r.mora?t+="&rsquo;":1==r.mora?t+=r.text+"&#774;":t+=r.text:r.caesura_type?t+=" ":t+=r.text;return t}(function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let o=e[n];o.mora&&o.vowel&&((p(t,[2,1,1])||p(t,[2,2]))&&(t=[],r+=1),t.push(o.mora))," "==o.root&&(o.caesura_position=r+1,p(t,[2])?o.caesura_type="m":p(t,[2,1])?o.caesura_type="f":(p(t,[2,1,1])||p(t,[2,2]))&&(o.caesura_type="d"))}return e}(function(e){const t=e=>e.vowel&&0!=e.mora,r=e.filter(t).reverse();if(r.length<12||r.length>17)return e;const n=r.length;let o=[{meter:[null,2],dactyls_remaining:r.length-12}];for(;o.length>0;){let i=o.pop(),a=!0;i.meter.length>r.length&&(a=!1);for(let e=0;e<r.length&&e<i.meter.length;e++)2==r[e].mora&&1==i.meter[e]&&(a=!1);if(i.meter.length==n&&1==i.meter[n-1]&&(a=!1),a)if(i.meter.length==n){if(0==i.dactyls_remaining){for(let r=0;r<e.length;r++)t(e[r])&&(e[r].mora=i.meter.pop());return e}}else o.push({dactyls_remaining:i.dactyls_remaining,meter:i.meter.concat([2,2])}),o.push({dactyls_remaining:i.dactyls_remaining-1,meter:i.meter.concat([1,1,2])})}return e}(function(e){var t,r;for(var n in e){var i=e[n];o(i)||!i.vowel||i.mora||(t=n,r=void 0,((r=(r=e.slice(t).slice(1).filter((function(e){return e&&!e.whitespace}))).filter((function(e){return!e.whitespace&&"h"!=e.root}))).length>0&&!r[0].vowel&&2==r[0].mora||r.length>1&&!r[0].vowel&&!r[1].vowel&&"i"!=r[0].root&&"i"!=r[1].root)&&(e[n].mora=2))}return e}(function(e){for(var t in e)if(e[t].vowel){var r=e.slice(t);r.shift(),r.length>0&&(r=r[0].whitespace?r.slice(1):r.length>1&&r[1].whitespace&&"m"==r[0].root?r.slice(2):[]).length>1&&("h"==r[0].root?r[1]:r[0]).vowel&&(e[t].mora=0),r.length>0&&r[0].whitespace}return e}(function(e){for(var t=0;t<e.length-1;t++)if("o"==e[t].root&&(!e[t+1].root||e[t+1].root.match(/[^a-z]/i))){let r=!1;for(let n of["modo","ego","homo","nemo"])if(n==e.slice(t-n.length+1,t+1).map((e=>e.root)).join("")){r=!0;break}r||(e[t].mora=2)}return e}(i(/([a-z ])/gi,(function(e){return{root:e[1].toLowerCase(),text:e[1],whitespace:e[1].match(/[ ]/),fullstop:!!e[1].match(/[\.;]/)}}))(c(s(u(l(a(function(e){var t,r=/(\b|^)(|in|ex?|pro|a[bd]|sub|non|super|per|ob)(i)([aeiou])/gi,n=[];for(var i in e)if(o(e[i])){for(prev=0,r.lastIndex=0;null!=(t=r.exec(e[i]));)n.push(e[i].substr(prev,t.index-prev)+t[2]),n.push({type:"token",vowel:!1,text:t[3]==t[3].toLowerCase()?"j":"J",root:"j",mora:1}),prev=t.index+t[2].length+t[3].length;n.push(e[i].substr(prev))}else n.push(e[i]);for(var i in e=n,n=[],r=/([aeiou])(i)([aeiou])/gi,e)if(o(e[i])){for(prev=0,r.lastIndex=0;null!=(t=r.exec(e[i]));)n.push(e[i].substr(prev,t.index-prev)+t[1]),n.push({type:"token",vowel:!1,text:t[3]==t[3].toLowerCase()?"j":"J",root:"j",mora:1}),prev=t.index+t[2].length+t[3].length;n.push(e[i].substr(prev))}else n.push(e[i]);return n}([e.replace(/ +/g," ")]))))))).filter((function(e){return e}))))))))}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n=r(138);Calliope=n})();